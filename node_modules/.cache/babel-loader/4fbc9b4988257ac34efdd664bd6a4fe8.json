{"ast":null,"code":"export const setCurrentUser = user => {\n  return {\n    type: \"SET_CURRENT_USER\",\n    user\n  };\n}; // asynchtonous action creators\n\nexport const login = credentials => {\n  console.log(\"credentials are\", credentials);\n  return dispatch => {\n    return fetch(\"http://localhost:3000/api/v1/login\", {\n      credentials: \"include\",\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify(credentials)\n    }).then(r => r.json()).then(user => {\n      if (user.error) {\n        alert(user.error);\n      } else {\n        dispatch(setCurrentUser(user));\n      }\n    }).catch(console.log);\n  };\n};\nexport const clearCurrentUser = () => {\n  return {\n    type: \"CLEAR_CURRENT_USER\"\n  };\n};\nexport const logout = () => {\n  return dispatch => {\n    dispatch(clearCurrentUser());\n    return fetch('http://localhost:3000/api/v1/logout', {\n      credentials: \"include\",\n      method: \"DELETE\"\n    });\n  };\n};\nexport const getCurrentUser = () => {\n  console.log(\"Dispatching get current user\");\n  return dispatch => {\n    return fetch(\"http://localhost:3000/api/v1/get_current_user\", {\n      credentials: \"include\",\n      method: \"GET\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      }\n    }).then(r => r.json()).then(user => {\n      if (user.error) {\n        alert(user.error);\n      } else {\n        dispatch(setCurrentUser(user));\n      }\n    }).catch(console.log);\n  };\n};","map":{"version":3,"sources":["/Users/timurmishiev/burger-hub-frontend/src/actions/currentUser.js"],"names":["setCurrentUser","user","type","login","credentials","console","log","dispatch","fetch","method","headers","body","JSON","stringify","then","r","json","error","alert","catch","clearCurrentUser","logout","getCurrentUser"],"mappings":"AAAA,OAAO,MAAMA,cAAc,GAAGC,IAAI,IAAI;AACpC,SAAO;AACLC,IAAAA,IAAI,EAAE,kBADD;AAELD,IAAAA;AAFK,GAAP;AAID,CALM,C,CAOP;;AACA,OAAO,MAAME,KAAK,GAAGC,WAAW,IAAI;AAClCC,EAAAA,OAAO,CAACC,GAAR,CAAY,iBAAZ,EAA+BF,WAA/B;AACA,SAAOG,QAAQ,IAAI;AACjB,WAAOC,KAAK,CAAC,oCAAD,EAAuC;AACjDJ,MAAAA,WAAW,EAAE,SADoC;AAEjDK,MAAAA,MAAM,EAAE,MAFyC;AAGjDC,MAAAA,OAAO,EAAE;AACP,wBAAgB;AADT,OAHwC;AAMjDC,MAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAeT,WAAf;AAN2C,KAAvC,CAAL,CAQJU,IARI,CAQCC,CAAC,IAAIA,CAAC,CAACC,IAAF,EARN,EASJF,IATI,CASEb,IAAI,IAAI;AACb,UAAIA,IAAI,CAACgB,KAAT,EAAgB;AACdC,QAAAA,KAAK,CAACjB,IAAI,CAACgB,KAAN,CAAL;AACD,OAFD,MAEO;AACLV,QAAAA,QAAQ,CAACP,cAAc,CAACC,IAAD,CAAf,CAAR;AACD;AACF,KAfI,EAgBJkB,KAhBI,CAgBEd,OAAO,CAACC,GAhBV,CAAP;AAiBD,GAlBD;AAmBD,CArBM;AAuBP,OAAO,MAAMc,gBAAgB,GAAG,MAAM;AACpC,SAAO;AACLlB,IAAAA,IAAI,EAAE;AADD,GAAP;AAGD,CAJM;AAMP,OAAO,MAAMmB,MAAM,GAAG,MAAM;AAC1B,SAAOd,QAAQ,IAAI;AACjBA,IAAAA,QAAQ,CAACa,gBAAgB,EAAjB,CAAR;AACA,WAAOZ,KAAK,CAAC,qCAAD,EAAwC;AAClDJ,MAAAA,WAAW,EAAE,SADqC;AAElDK,MAAAA,MAAM,EAAE;AAF0C,KAAxC,CAAZ;AAID,GAND;AAOD,CARM;AAUP,OAAO,MAAMa,cAAc,GAAG,MAAM;AAClCjB,EAAAA,OAAO,CAACC,GAAR,CAAY,8BAAZ;AACA,SAAOC,QAAQ,IAAI;AACjB,WAAOC,KAAK,CAAC,+CAAD,EAAkD;AAC5DJ,MAAAA,WAAW,EAAE,SAD+C;AAE5DK,MAAAA,MAAM,EAAE,KAFoD;AAG5DC,MAAAA,OAAO,EAAE;AACP,wBAAgB;AADT;AAHmD,KAAlD,CAAL,CAONI,IAPM,CAODC,CAAC,IAAIA,CAAC,CAACC,IAAF,EAPJ,EAQNF,IARM,CAQDb,IAAI,IAAI;AACZ,UAAIA,IAAI,CAACgB,KAAT,EAAgB;AACdC,QAAAA,KAAK,CAACjB,IAAI,CAACgB,KAAN,CAAL;AACD,OAFD,MAEO;AACLV,QAAAA,QAAQ,CAACP,cAAc,CAACC,IAAD,CAAf,CAAR;AACD;AACF,KAdM,EAeNkB,KAfM,CAeAd,OAAO,CAACC,GAfR,CAAP;AAgBD,GAjBD;AAkBD,CApBM","sourcesContent":["export const setCurrentUser = user => {\n  return {\n    type: \"SET_CURRENT_USER\",\n    user\n  }\n}\n\n// asynchtonous action creators\nexport const login = credentials => {\n  console.log(\"credentials are\", credentials)\n  return dispatch => {\n    return fetch(\"http://localhost:3000/api/v1/login\", {\n      credentials: \"include\",\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify(credentials)\n    })\n      .then(r => r.json())\n      .then( user => {\n        if (user.error) {\n          alert(user.error)\n        } else {\n          dispatch(setCurrentUser(user))\n        }\n      })\n      .catch(console.log)\n  }\n}\n\nexport const clearCurrentUser = () => {\n  return {\n    type: \"CLEAR_CURRENT_USER\"\n  }\n}\n\nexport const logout = () => {\n  return dispatch => {\n    dispatch(clearCurrentUser())\n    return fetch('http://localhost:3000/api/v1/logout', {\n      credentials: \"include\",\n      method: \"DELETE\"\n    })\n  }\n}\n\nexport const getCurrentUser = () => {\n  console.log(\"Dispatching get current user\")\n  return dispatch => {\n    return fetch(\"http://localhost:3000/api/v1/get_current_user\", {\n      credentials: \"include\",\n      method: \"GET\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n    })\n    .then(r => r.json())\n    .then(user => {\n      if (user.error) {\n        alert(user.error)\n      } else {\n        dispatch(setCurrentUser(user))\n      }\n    })\n    .catch(console.log)\n  }\n}\n\n"]},"metadata":{},"sourceType":"module"}